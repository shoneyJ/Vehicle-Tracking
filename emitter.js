var io = require('socket.io-client');
var redis = require('redis');

var longlats =[
[49.413687,8.651119],
[49.41369,8.65118],
[49.41375,8.65222],
[49.41381,8.6537],
[49.41385,8.654020000000001],
[49.41403,8.654520000000002],
[49.414089999999995,8.65468],
[49.41425999999999,8.655040000000001],
[49.41434999999999,8.655240000000001],
[49.414179999999995,8.65543],
[49.41407999999999,8.655560000000001],
[49.41396999999999,8.65572],
[49.41357999999999,8.656310000000001],
[49.413479999999986,8.656460000000001],
[49.41334999999999,8.65665],
[49.41278999999999,8.657490000000001],
[49.41260999999999,8.657760000000001],
[49.412449999999986,8.65801],
[49.41231999999999,8.65822],
[49.412179999999985,8.65845],
[49.41205999999998,8.65866],
[49.411929999999984,8.6589],
[49.411819999999985,8.65912],
[49.411709999999985,8.65935],
[49.411619999999985,8.659559999999999],
[49.411529999999985,8.65978],
[49.411419999999985,8.66006],
[49.41128999999999,8.6604],
[49.41115999999999,8.660739999999999],
[49.41102999999999,8.661089999999998],
[49.41090999999999,8.661429999999998],
[49.41050999999999,8.662629999999998],
[49.41044999999999,8.662809999999999],
[49.41036999999999,8.663059999999998],
[49.41029999999999,8.663299999999998],
[49.410239999999995,8.663509999999997],
[49.41018,8.663759999999996],
[49.410129999999995,8.663989999999997],
[49.41007,8.664299999999997],
[49.409909999999996,8.665169999999998],
[49.409859999999995,8.665439999999998],
[49.409789999999994,8.665869999999998],
[49.409769999999995,8.665969999999998],
[49.409589999999994,8.667009999999998],
[49.40946999999999,8.667749999999998],
[49.40942999999999,8.667969999999999],
[49.40939999999999,8.668179999999998],
[49.40933999999999,8.668569999999997],
[49.40924999999999,8.669089999999997],
[49.40923999999999,8.669159999999996],
[49.40919999999999,8.669239999999997],
[49.40916999999999,8.669299999999996],
[49.40913999999999,8.669349999999996],

[49.40907999999998,8.669419999999997],
[49.40903999999998,8.669449999999998],
[49.40898999999998,8.669479999999998],
[49.40893999999998,8.669499999999998],
[49.40886999999998,8.669519999999997],
[49.40866999999998,8.669409999999997],
[49.40843999999998,8.669269999999997],
[49.408409999999975,8.669249999999998],
[49.40832999999998,8.669199999999998],
[49.40823999999998,8.66913],
[49.408189999999976,8.669049999999999],
[49.408159999999974,8.668949999999999],
[49.40816999999998,8.668779999999998],
[49.408209999999976,8.668239999999997],
[49.40821999999998,8.667799999999998],
[49.40824999999998,8.667169999999999],
[49.40828999999998,8.66669],
[49.40833999999998,8.66616],
[49.40842999999998,8.6655],
[49.408529999999985,8.66485],
[49.40869999999998,8.66405],
[49.408889999999985,8.66325],
[49.40902999999999,8.66273],
[49.40923999999999,8.66192],
[49.40955999999999,8.660730000000001],
[49.40971999999999,8.66013],
[49.41080999999999,8.655980000000001],
[49.41152999999999,8.653260000000001],
[49.41174999999999,8.652420000000001],
[49.41178999999999,8.652280000000001],
[49.41245999999999,8.649770000000002],
[49.41251999999999,8.649540000000002],
[49.41260999999999,8.649190000000003],
];


// var longlats =
// [[8.650953238482463,49.41391368555925],
// [8.650953238482463,49.41401368555925],
// [8.650953238482463,49.41501368555925],
// [8.650953238482463,49.41601368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41801368555925],
// [8.650953238482463,49.41901368555925],
// [8.650953238482463,49.42001368555925],
// [8.650953238482463,49.42101368555925],
// [8.650953238482463,49.42201368555925],
// [8.650953238482463,49.42301368555925],
// [8.650953238482463,49.42401368555925],
// [8.650953238482463,49.42501368555925],
// [8.650953238482463,49.42601368555925],
// [8.650953238482463,49.42701368555925],
// [8.650953238482463,49.42801368555925],
// [8.650953238482463,49.42901368555925],
// [8.650953238482463,49.43001368555925],
// [8.650953238482463,49.43101368555925],
// [8.650953238482463,49.43501368555925],
// [8.650953238482463,49.43601368555925],
// [8.650953238482463,49.43701368555925],
// [8.650953238482463,49.43801368555925],
// [8.650953238482463,49.43901368555925],
// [8.650953238482463,49.44001368555925],
// [8.650953238482463,49.45001368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],

// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],
// [8.650953238482463,49.41701368555925],

// ];

const socket = io('ws://localhost:3000');
var count = 1;
setInterval(function() {
  console.log(count);
  if (count < longlats.length){
    var item = {};
    item.Coordinate = {};
    item.Coordinate.Longitude = longlats[count][0];
    item.Coordinate.Latitude = longlats[count][1];
    count++;
    //updateCoordinate(item);

    //push data to redis
    (async () => {
        const client = redis.createClient();
      
        client.on('error', (err) => console.log('Redis Client Error', err));
      
        await client.connect();
      
        await client.set('key'+count, JSON.stringify(item));
        const value = await client.get('key'+count);
        console.log(value);
      })();
   
     
    socket.emit('lastKnownLocation', item);
  }
}, 5000);

